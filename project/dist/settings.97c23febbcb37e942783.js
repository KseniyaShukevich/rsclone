(()=>{var e={1504:e=>{function t(e,t,r,n,a,s,o){try{var c=e[s](o),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,a)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(a,s){var o=e.apply(r,n);function c(e){t(o,a,s,c,u,"next",e)}function u(e){t(o,a,s,c,u,"throw",e)}c(void 0)}))}}},7135:(e,t,r)=>{e.exports=r(6248)},412:(e,t,r)=>{"use strict";r(5612);var n=r(7135),a=r.n(n),s=r(1504),o=r.n(s);function c(){return localStorage.getItem("".concat("qwertyujn","token"))}function u(e){return i.apply(this,arguments)}function i(){return(i=o()(a().mark((function e(t){var r,n,s,o,c,u,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:"GET",n=i.length>2&&void 0!==i[2]?i[2]:null,s={},n&&(s["Content-Type"]="application/json",o=JSON.stringify(n)),e.next=6,fetch("".concat("").concat(t),{method:r,headers:s,body:o});case 6:if((c=e.sent).ok){e.next=10;break}return console.warn("Error",c.statusText),e.abrupt("return",null);case 10:return e.next=12,c.json();case 12:return u=e.sent,e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l,d=document.querySelector("#btn-save"),p=document.querySelector("#new-email"),f=document.querySelector("#file"),m=document.querySelector("#image-preview"),v=document.querySelector("#email-error-message"),y=document.querySelector("#curr-password"),g=document.querySelector("#currPass-error-message"),b=document.querySelector("#new-password"),h=document.querySelector("#new-pass-error-message"),k=document.querySelector("#repeat-new-password"),w=document.querySelector("#repeat-new-pass-error-message"),L=document.querySelector("#save-error-message"),x=document.querySelector("#email-error-message-reg"),S=document.querySelector("#success-save-message");function q(e){return P.apply(this,arguments)}function P(){return(P=o()(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!/^[a-z0-9_.]+@\w+\.\w+$/i.test(t)){e.next=7;break}return e.next=3,u("/settings/api/email","POST",{email:t});case 3:if((r=e.sent).length&&!x.classList.contains("display-block")&&x.classList.add("display-block"),!r.length){e.next=7;break}return e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return E.apply(this,arguments)}function E(){return(E=o()(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=p.value.trim())||/^[a-z0-9_.]+@\w+\.\w+$/i.test(t)){e.next=4;break}return v.classList.contains("display-block")||(v.classList.add("display-block"),p.classList.add("error-color")),e.abrupt("return",!1);case 4:return q(t),v.classList.remove("display-block"),e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){e.target.classList.remove("error-color"),t.classList.remove("display-block")}function j(){return _.apply(this,arguments)}function _(){return(_=o()(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=y.value.trim())){e.next=8;break}return e.next=4,u("/settings/api/password","POST",{currPass:t,token:c()});case 4:if(e.sent.password){e.next=8;break}return y.classList.contains("error-color")||(y.classList.add("error-color"),g.classList.add("display-block")),e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){var e=y.value.trim(),t=b.value.trim(),r=k.value.trim();e&&t&&r&&function(e,t,r){t===r&&t.length>5&&r.length>5&&u("/settings/api/password","PUT",{currPass:e,newPass:t,token:c()})}(e,t,r)}function D(){var e=b.value.trim(),t=k.value.trim();return e===t&&e.length>5&&t.length>5||!e&&!t}function M(){S.classList.add("display-block"),setTimeout((function(){S.classList.remove("display-block")}),3e3)}function U(){L.classList.add("display-block"),setTimeout((function(){L.classList.remove("display-block")}),3e3)}function C(){var e,t,r,n;e=document.querySelector("#user-settings"),(t=new XMLHttpRequest).open("POST","settings/api/image"),t.send(new FormData(e)),(r=document.querySelector("#new-name").value.trim())&&u("/settings/api/name","PUT",{name:r,token:c()}),(n=p.value.trim())&&u("/settings/api/email","PUT",{email:n,token:c()}),I()}function R(){return(R=o()(a().mark((function e(t){var r,n,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=p.value.trim(),e.next=4,j();case 4:return n=e.sent,e.next=7,q(r);case 7:return s=e.sent,e.next=10,T();case 10:e.sent&&n&&D()&&s?(C(),M()):U(),t.target.blur();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(l=o()(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u("/user/api/userData","POST",{token:c()});case 2:(t=e.sent)[0].image?m.style.backgroundImage='url("'.concat(t[0].image,'")'):m.style.backgroundImage='url("./avatar.jpg")';case 4:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)})(),document.querySelector("#user-token").value=c(),d.addEventListener("click",(function(e){return R.apply(this,arguments)})),f.addEventListener("change",(function(){if(f.files&&f.files[0]){var e=new FileReader;e.addEventListener("loadend",(function(e){m.style.backgroundImage='url("'.concat(e.target.result,'")')})),e.readAsDataURL(f.files[0])}})),p.addEventListener("blur",T),p.addEventListener("focus",(function(e){O(e,v)})),p.addEventListener("focus",(function(){x.classList.remove("display-block")})),y.addEventListener("blur",j),y.addEventListener("focus",(function(e){O(e,g)})),b.addEventListener("blur",(function(){var e=b.value.trim();e&&e.length<6&&(b.classList.contains("error-color")||(b.classList.add("error-color"),h.classList.add("display-block")))})),b.addEventListener("focus",(function(e){O(e,h)})),k.addEventListener("blur",(function(){b.value.trim()!==k.value.trim()&&(k.classList.contains("error-color")||(k.classList.add("error-color"),w.classList.add("display-block")))})),k.addEventListener("focus",(function(e){O(e,w)}));r(7292)},7292:()=>{var e,t;document.querySelector(".form-switch_color").addEventListener("click",(function(){document.body.classList.toggle("dark"),document.body.classList.contains("dark")?localStorage.setItem("colorTheme","dark"):localStorage.setItem("colorTheme","light")})),e=localStorage.getItem("colorTheme"),t=document.querySelector(".form-switch_color input"),"dark"===e&&(document.body.classList.add("dark"),t.setAttribute("checked",""))}},t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.m=e,r.x=e=>{},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={571:0},t=[[412,248,923,612]],n=e=>{},a=(a,s)=>{for(var o,c,[u,i,l,d]=s,p=0,f=[];p<u.length;p++)c=u[p],r.o(e,c)&&e[c]&&f.push(e[c][0]),e[c]=0;for(o in i)r.o(i,o)&&(r.m[o]=i[o]);for(l&&l(r),a&&a(s);f.length;)f.shift()();return d&&t.push.apply(t,d),n()},s=self.webpackChunk=self.webpackChunk||[];function o(){for(var n,a=0;a<t.length;a++){for(var s=t[a],o=!0,c=1;c<s.length;c++){var u=s[c];0!==e[u]&&(o=!1)}o&&(t.splice(a--,1),n=r(r.s=s[0]))}return 0===t.length&&(r.x(),r.x=e=>{}),n}s.forEach(a.bind(null,0)),s.push=a.bind(null,s.push.bind(s));var c=r.x;r.x=()=>(r.x=c||(e=>{}),(n=o)())})(),r.x()})();